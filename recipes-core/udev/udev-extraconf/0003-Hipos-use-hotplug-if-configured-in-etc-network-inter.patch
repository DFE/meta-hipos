From 8dbb0df030278f896e2faa0a3e622d05cc7ca5b8 Mon Sep 17 00:00:00 2001
From: Eik Binschek <binschek@dresearch-fe.de>
Date: Wed, 24 Jun 2015 16:39:40 +0200
Subject: [PATCH 3/3] Hipos: use hotplug if configured in
 /etc/network/interfaces HYP-11339

Signed-off-by: Eik Binschek <binschek@dresearch-fe.de>
---
 network.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/network.sh b/network.sh
index 3ee9271..72f52fd 100644
--- a/network.sh
+++ b/network.sh
@@ -2,6 +2,7 @@
 
 # We get two "add" events for hostap cards due to wifi0
 echo "$INTERFACE" | grep -q wifi && exit 0
+echo "$INTERFACE" | grep -q wlan && exit 0
 
 # udevd does clearenv(). Export shell PATH to children.
 export PATH
@@ -40,7 +41,7 @@ fi
 
 # if this interface has an entry in /etc/network/interfaces, let ifupdown
 # handle it
-if grep -q "iface \+$INTERFACE" /etc/network/interfaces; then
+if grep "allow-hotplug" /etc/network/interfaces | grep -q "$INTERFACE"; then
   case $ACTION in
     add)
     	ifconfig | grep -q "^$INTERFACE" || ifup $INTERFACE
-- 
2.4.3

