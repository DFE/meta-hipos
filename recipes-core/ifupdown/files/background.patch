From d7ff1bbc1774aa4fa39bfc05f9a2b6802d6896c5 Mon Sep 17 00:00:00 2001
From: Steffen Sledz <sledz@dresearch-fe.de>
Date: Thu, 29 Jun 2017 14:29:08 +0200
Subject: [PATCH] ifupdown: enable udhcpc backgrounding HYP-17009

The former default behaviour was to exit with failure if lease is not
immediately obtained. This results in permanent network disconnect if
DHCP server is (accidentally) not available at boot time. :(

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
Signed-off-by: Steffen Sledz <sledz@dresearch-fe.de>
---
 inet.defn | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/inet.defn b/inet.defn
index b5f5da2..592b0ab 100644
--- a/inet.defn
+++ b/inet.defn
@@ -99,7 +99,7 @@ method dhcp
         if (execable("/sbin/dhclient"))
     pump -i %iface% [[-h %hostname%]] [[-l %leasehours%]] \
         elsif (execable("/sbin/pump"))
-    udhcpc -n -p /run/udhcpc.%iface%.pid -i %iface% [[-x hostname:%hostname%]] \
+    udhcpc -b -p /run/udhcpc.%iface%.pid -i %iface% [[-x hostname:%hostname%]] \
         elsif (execable("/sbin/udhcpc"))
     dhcpcd [[-h %hostname%]] [[-i %vendor%]] [[-I %client%]] \
            [[-l %leasetime%]] [[-m %metric%]] %iface% \
-- 
2.13.2

