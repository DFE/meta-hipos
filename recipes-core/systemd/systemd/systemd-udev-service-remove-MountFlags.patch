From 7d80a92c47750e0e1e0adf2ac8363c6f8fed46f8 Mon Sep 17 00:00:00 2001
From: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
Date: Mon, 14 Sep 2020 09:26:03 +0200
Subject: [PATCH] systemd-udev.service remove MountFlags

Remove MountFlags=slave. The default MountFlags=shared is now active.
MountFlags=shared ensures that mounts and umounts done by udev rules are
propagated to host. See also

http://www.volkerschatz.com/unix/advmount.html
http://www.freedesktop.org/software/systemd/man/systemd.exec.html

With systemd version 239 the flag PrivateMounts=yes must be removed to
get the old behavior.

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
---
 units/systemd-udevd.service.in | 1 -
 1 file changed, 1 deletion(-)

diff --git a/units/systemd-udevd.service.in b/units/systemd-udevd.service.in
index 8b1dd0efc7..881930cdf4 100644
--- a/units/systemd-udevd.service.in
+++ b/units/systemd-udevd.service.in
@@ -26,7 +26,6 @@ ExecStart=@rootlibexecdir@/systemd-udevd
 ExecReload=@rootbindir@/udevadm control --reload --timeout 0
 KillMode=mixed
 TasksMax=infinity
-PrivateMounts=yes
 ProtectHostname=yes
 MemoryDenyWriteExecute=yes
 RestrictAddressFamilies=AF_UNIX AF_NETLINK AF_INET AF_INET6
-- 
2.16.4

