From 5e6e75715d1f714f9aad429f106407de3efecc4e Mon Sep 17 00:00:00 2001
From: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
Date: Tue, 2 May 2023 16:39:02 +0200
Subject: [PATCH] systemd-udev.service remove MountFlags

Remove MountFlags=slave. The default MountFlags=shared is now active.
MountFlags=shared ensures that mounts and umounts done by udev rules are
propagated to host. See also

http://www.volkerschatz.com/unix/advmount.html
http://www.freedesktop.org/software/systemd/man/systemd.exec.html

With systemd version 239 the flag PrivateMounts=yes must be removed to
get the old behavior.

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
---
 units/systemd-udevd.service.in | 1 -
 1 file changed, 1 deletion(-)

diff --git a/units/systemd-udevd.service.in b/units/systemd-udevd.service.in
index dfc2a0e341..ecc0ff4980 100644
--- a/units/systemd-udevd.service.in
+++ b/units/systemd-udevd.service.in
@@ -27,7 +27,6 @@ RestartSec=0
 ExecStart={{ROOTLIBEXECDIR}}/systemd-udevd
 KillMode=mixed
 TasksMax=infinity
-PrivateMounts=yes
 ProtectHostname=yes
 MemoryDenyWriteExecute=yes
 RestrictAddressFamilies=AF_UNIX AF_NETLINK AF_INET AF_INET6
-- 
2.25.1

