From 76de44e1b677d8f2e0e6572803bb8b4c0fa9dd88 Mon Sep 17 00:00:00 2001
From: Steffen Sledz <sledz@dresearch-fe.de>
Date: Tue, 12 Mar 2019 14:39:17 +0000
Subject: [PATCH] Disable workaround MLK-11444 HYP-20171

The workaround MLK-11444 ata fixes Error ERR009598 documented in errata.
This significatly decreases SATA write speed. As long as the error is not
observed, the workaround can be deactivated.

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
---
 drivers/ata/ahci_imx.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/drivers/ata/ahci_imx.c b/drivers/ata/ahci_imx.c
index da5fe2315bc8..c5720618a983 100644
--- a/drivers/ata/ahci_imx.c
+++ b/drivers/ata/ahci_imx.c
@@ -994,6 +994,12 @@ static int imx_ahci_probe(struct platform_device *pdev)
 		writel(reg_val, hpriv->mmio + IMX_TIMER1MS);
 	}
 
+	/* The following workaround fixes Error ERR009598 documented in errata.
+	 * This significatly decreases SATA write speed.
+	 * As long as the error is not observed, the workaround can be deactivated.
+	 * HYP-20171 MST
+	 */
+#if 0
 	/*
 	* Due to IP bug on the Synopsis 3.00 SATA version,
 	* which is present on mx6q, and not on mx53,
@@ -1011,6 +1017,7 @@ static int imx_ahci_probe(struct platform_device *pdev)
 			goto disable_sata;
 		}
 	}
+#endif
 
 	ret = ahci_platform_init_host(pdev, hpriv, &ahci_imx_port_info,
 				      &ahci_platform_sht);
-- 
2.20.1

