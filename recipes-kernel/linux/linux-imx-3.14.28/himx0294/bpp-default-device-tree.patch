From 647df4b9e96ba545e4764999941e2132e3c0caee Mon Sep 17 00:00:00 2001
From: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
Date: Thu, 18 Jun 2015 16:28:51 +0200
Subject: [PATCH] mxc_ipuv3_fb: Fix default bpp

So far bpp (bit per pixel) is 16 if not specified as kernel command line option.
This commit use bpp from device tree entry 'default_bpp' if no command line
option given.

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
---
 drivers/video/mxc/mxc_ipuv3_fb.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/video/mxc/mxc_ipuv3_fb.c b/drivers/video/mxc/mxc_ipuv3_fb.c
index 1fbfc9d..3263421 100644
--- a/drivers/video/mxc/mxc_ipuv3_fb.c
+++ b/drivers/video/mxc/mxc_ipuv3_fb.c
@@ -1940,6 +1940,7 @@ static int mxcfb_dispdrv_init(struct platform_device *pdev,
 		/* fix-up  */
 		mxcfbi->ipu_di_pix_fmt = setting.if_fmt;
 		mxcfbi->default_bpp = setting.default_bpp;
+		bpp_to_var(mxcfbi->default_bpp, &fbi->var);
 
 		ret = mxcfb_get_crtc(&pdev->dev, mxcfbi, setting.crtc);
 		if (ret)
-- 
2.1.4

