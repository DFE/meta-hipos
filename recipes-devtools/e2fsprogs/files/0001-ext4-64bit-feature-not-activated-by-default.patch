From cb2d9935d7043f48b43fbb6d828ce6c5618a3b7d Mon Sep 17 00:00:00 2001
From: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
Date: Tue, 30 May 2023 15:30:07 +0200
Subject: [PATCH] ext4 64bit feature not activated by default HYP-24046

The ext4 64bit feature allows partitioning greater than 16TiB. But with
older u-boot versions it leads to boot problems, because the ext4 64bit
feature is not yet supported.
To remain backwards compatible, the ext4 64bit feature is no longer
activated by default.

Signed-off-by: Mario Schuknecht <mario.schuknecht@dresearch-fe.de>
---
 misc/mke2fs.conf.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/misc/mke2fs.conf.in b/misc/mke2fs.conf.in
index 3657d738..4d72022d 100644
--- a/misc/mke2fs.conf.in
+++ b/misc/mke2fs.conf.in
@@ -11,7 +11,8 @@
 		features = has_journal
 	}
 	ext4 = {
-		features = has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize,orphan_file
+		features = has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,dir_nlink,extra_isize,orphan_file
+		auto_64-bit_support = 1
 	}
 	small = {
 		blocksize = 1024
-- 
2.34.1

